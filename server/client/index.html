<!DOCTYPE html>
<html>
  <head>
    <title>FIU UPE NodeJS Demo</title>
  </head>
  <body>
    <h2>A simple HTML page!</h2>
    <button type="button" onclick="getRick()">Click me!</button>
    <button type="button" onclick="getRS()">Click me!</button>
    <div>
      <input type="text" id="text" />
      <button type="button" onclick="sendText()">Send!</button>
    </div>
    <div id="root">
      <img src="" id="image" />
    </div>

    <script type="application/javascript">
      function getRick() {
        const Http = new XMLHttpRequest();
        Http.open("GET", "http://localhost:8080/rick");
        Http.send();

        Http.onreadystatechange = e => {
          if (Http.readyState == 4 && Http.status == 200) {
            const img = document.getElementById("image");
            img.width = 1000;
            img.src = Http.responseText;
          }
        };
      }

      function getRS() {
        const Http = new XMLHttpRequest();
        Http.open("GET", "http://localhost:8080/rs");
        Http.send();

        Http.onreadystatechange = e => {
          if (Http.readyState == 4 && Http.status == 200) {
            const img = document.getElementById("image");
            img.width = 1000;
            img.src = Http.responseText;
          }
        };
      }

      function sendText() {
        const text = document.getElementById("text");
        const Http = new XMLHttpRequest();
        Http.open("POST", "http://localhost:8080/text", true);
        Http.setRequestHeader("Content-type", "application/json;charset=UTF-8");
        Http.send(JSON.stringify({ text: text.value }));
        text.value = "";
      }
    </script>
  </body>
</html>
